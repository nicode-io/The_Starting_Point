(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{119:function(t,e,n){},181:function(t,e,n){"use strict";n.r(e);var i=n(0),c=n(34),a=n.n(c),r=(n(155),n(119),n(195)),o=n(44),s=n(205),u=n(199),l=n(138),d=n(202),j=n(200),v=n(194),b=n(5);function h(t){var e=t.inverted,n=void 0===e||e,i=t.content,c=void 0===i?"Loading...":i;return Object(b.jsx)(j.a,{active:!0,inverted:n,children:Object(b.jsx)(v.a,{content:c})})}var p=n(27),O=n.n(p),f=n(55),x=n(136),g=n(137),y=n(10),m=n(201),A=n(56),C=n.n(A),w=function(t){return new Promise((function(e){setTimeout(e,t)}))};C.a.defaults.baseURL="http://localhost:5000/api",C.a.interceptors.response.use(function(){var t=Object(f.a)(O.a.mark((function t(e){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w(1e3);case 3:return t.abrupt("return",e);case 6:return t.prev=6,t.t0=t.catch(0),console.log(t.t0),t.next=11,Promise.reject(t.t0);case 11:return t.abrupt("return",t.sent);case 12:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}());var k=function(t){return t.data},I=function(t){return C.a.get(t).then(k)},S=function(t,e){return C.a.post(t,e).then(k)},D=function(t,e){return C.a.put(t,e).then(k)},M=function(t){return C.a.delete(t).then(k)},R={Activities:{list:function(){return I("/activities")},details:function(t){return I("/activities/".concat(t))},create:function(t){return S("/activities",t)},update:function(t){return D("/activities/".concat(t.id),t)},delete:function(t){return M("/activities/".concat(t))}}},F={activityStore:new(function(){function t(){var e=this;Object(x.a)(this,t),this.activityRegistry=new Map,this.selectedActivity=void 0,this.editMode=!1,this.loading=!1,this.loadingInitial=!0,this.loadActivities=Object(f.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R.Activities.list();case 3:t.sent.forEach((function(t){t.date=t.date.split("T")[0],e.activityRegistry.set(t.id,t)})),e.setLoadingInitial(!1),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0),e.setLoadingInitial(!1);case 12:case"end":return t.stop()}}),t,null,[[0,8]])}))),this.setLoadingInitial=function(t){e.loadingInitial=t},this.selectActivity=function(t){e.selectedActivity=e.activityRegistry.get(t)},this.cancelSelectedActivity=function(){e.selectedActivity=void 0},this.openForm=function(t){t?e.selectActivity(t):e.cancelSelectedActivity(),e.editMode=!0},this.closeForm=function(){e.editMode=!1},this.createActivity=function(){var t=Object(f.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,n.id=Object(m.a)(),t.prev=2,t.next=5,R.Activities.create(n);case 5:Object(y.g)((function(){e.activityRegistry.set(n.id,n),e.selectedActivity=n,e.editMode=!1,e.loading=!1})),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(2),console.log(t.t0),Object(y.g)((function(){e.loading=!1}));case 12:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e){return t.apply(this,arguments)}}(),this.updateActivity=function(){var t=Object(f.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,R.Activities.update(n);case 4:Object(y.g)((function(){e.activityRegistry.set(n.id,n),e.selectedActivity=n,e.editMode=!1,e.loading=!1})),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),console.log(t.t0),Object(y.g)((function(){e.loading=!1}));case 11:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}(),this.deleteActivity=function(){var t=Object(f.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,R.Activities.delete(n);case 4:Object(y.g)((function(){var t;e.activityRegistry.delete(n),(null===(t=e.selectedActivity)||void 0===t?void 0:t.id)===n&&e.cancelSelectedActivity(),e.loading=!1})),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),console.log(t.t0),Object(y.g)((function(){e.loading=!1}));case 11:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}(),Object(y.d)(this)}return Object(g.a)(t,[{key:"activitiesByDate",get:function(){return Array.from(this.activityRegistry.values()).sort((function(t,e){return Date.parse(t.date)-Date.parse(e.date)}))}}]),t}())},E=Object(i.createContext)(F);function L(){return Object(i.useContext)(E)}function T(){var t=L().activityStore,e=t.selectedActivity,n=t.openForm,i=t.cancelSelectedActivity;return e?Object(b.jsxs)(u.a,{fluid:!0,children:[Object(b.jsx)(l.a,{src:"/assets/images/categoryImages/".concat(e.category,".jpg")}),Object(b.jsxs)(u.a.Content,{children:[Object(b.jsx)(u.a.Header,{children:e.title}),Object(b.jsx)(u.a.Meta,{children:Object(b.jsx)("span",{children:e.date})}),Object(b.jsx)(u.a.Description,{children:e.description})]}),Object(b.jsx)(u.a.Content,{extra:!0,children:Object(b.jsxs)(d.a.Group,{widths:"2",children:[Object(b.jsx)(d.a,{onClick:function(){return n(e.id)},basic:!0,color:"blue",content:"Edit"}),Object(b.jsx)(d.a,{onClick:i,basic:!0,color:"grey",content:"Cancel"})]})})]}):Object(b.jsx)(h,{})}var B=n(100),P=n(116),G=n(103),H=n(204),J=n(196),V=Object(o.a)((function(){var t=L().activityStore,e=t.selectedActivity,n=t.closeForm,c=t.createActivity,a=t.updateActivity,r=t.loading,o=null!==e&&void 0!==e?e:{id:"",title:"",category:"",description:"",date:"",city:"",venue:""},s=Object(i.useState)(o),u=Object(G.a)(s,2),l=u[0],j=u[1];function v(t){var e=t.target,n=e.name,i=e.value;j(Object(P.a)(Object(P.a)({},l),{},Object(B.a)({},n,i)))}return Object(b.jsx)(H.a,{clearing:!0,children:Object(b.jsxs)(J.a,{onSubmit:function(){l.id?a(l):c(l)},autoComplete:"off",children:[Object(b.jsx)(J.a.Input,{placeholder:"Title",value:l.title,name:"title",onChange:v}),Object(b.jsx)(J.a.Input,{placeholder:"Description",value:l.description,name:"description",onChange:v}),Object(b.jsx)(J.a.Input,{placeholder:"Category",value:l.category,name:"category",onChange:v}),Object(b.jsx)(J.a.Input,{type:"date",placeholder:"Date",value:l.date,name:"date",onChange:v}),Object(b.jsx)(J.a.Input,{placeholder:"City",value:l.city,name:"city",onChange:v}),Object(b.jsx)(J.a.Input,{placeholder:"Venue",value:l.venue,name:"venue",onChange:v}),Object(b.jsx)(d.a,{loading:r,floated:"right",positive:!0,type:"submit",content:"Submit"}),Object(b.jsx)(d.a,{onClick:n,floated:"right",type:"button",content:"Cancel"})]})})})),U=n(198),q=n(105),z=Object(o.a)((function(){var t=L().activityStore,e=t.deleteActivity,n=t.activitiesByDate,c=t.loading,a=Object(i.useState)(""),r=Object(G.a)(a,2),o=r[0],s=r[1];return Object(b.jsx)(H.a,{children:Object(b.jsx)(U.a.Group,{divided:!0,children:n.map((function(n){return Object(b.jsx)(U.a,{children:Object(b.jsxs)(U.a.Content,{children:[Object(b.jsx)(U.a.Header,{as:"a",children:n.title}),Object(b.jsx)(U.a.Meta,{children:n.date}),Object(b.jsxs)(U.a.Description,{children:[Object(b.jsx)("div",{children:n.description}),Object(b.jsxs)("div",{children:[n.city,", ",n.venue]})]}),Object(b.jsxs)(U.a.Extra,{children:[Object(b.jsx)(d.a,{onClick:function(){return t.selectActivity(n.id)},floated:"right",content:"View",color:"blue"}),Object(b.jsx)(d.a,{name:n.id,loading:c&&o===n.id,onClick:function(t){return function(t,n){s(t.currentTarget.name),e(n)}(t,n.id)},floated:"right",content:"Delete",color:"red"}),Object(b.jsx)(q.a,{basic:!0,content:n.category})]})]})},n.id)}))})})})),K=Object(o.a)((function(){var t=L().activityStore,e=t.selectedActivity,n=t.editMode;return Object(b.jsxs)(s.a,{children:[Object(b.jsx)(s.a.Column,{width:"10",children:Object(b.jsx)(z,{})}),Object(b.jsxs)(s.a.Column,{width:"6",children:[e&&!n&&Object(b.jsx)(T,{}),n&&Object(b.jsx)(V,{})]})]})})),N=n(197);function Q(){var t=L().activityStore;return Object(b.jsx)(N.a,{inverted:!0,fixed:"top",children:Object(b.jsxs)(r.a,{children:[Object(b.jsxs)(N.a.Item,{header:!0,children:[Object(b.jsx)("img",{src:"/assets/images/logo.png",alt:"logo",style:{marginRight:"1em"}}),"Soci'Act"]}),Object(b.jsx)(N.a.Item,{name:"Activities"}),Object(b.jsx)(N.a.Item,{children:Object(b.jsx)(d.a,{onClick:function(){return t.openForm()},positive:!0,content:"Create Activity"})})]})})}var W=Object(o.a)((function(){var t=L().activityStore;return Object(i.useEffect)((function(){t.loadActivities()}),[t]),t.loadingInitial?Object(b.jsx)(h,{}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(Q,{}),Object(b.jsx)(r.a,{style:{marginTop:"7em"},children:Object(b.jsx)(K,{})})]})}));a.a.render(Object(b.jsx)(E.Provider,{value:F,children:Object(b.jsx)(W,{})}),document.getElementById("root"))}},[[181,1,2]]]);
//# sourceMappingURL=main.4e69bf2b.chunk.js.map